<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Async Await</title>
</head>
<body>
    <ul id="myList">

    </ul>

    <h2>JavaScript async / await</h2>
    <p id="demo"></p>

    <script>
                //data load from server(GET method)
                //copied from jsonPlaceholder.html,ekhane ektu function use kore load korsi,ei toh!

        //Way-1
        // function loadData(){
        //     fetch('https://jsonplaceholder.typicode.com/users')
        //         .then(response => response.json())//json a convert korlo
        //         .then(data => displayData(data))
        // }

        // function displayData(jaPelam){//jaPelam= copied "json" infos from JSON placeholder
        //     const jaTuleNilam=jaPelam.map(jaPelam => jaPelam.username);//show the names of all username from jaPelam. We could've done it so many ways. Here we have done it by map. 
        //     const ul= document.getElementById("myList");

        //     for( let i=0; i<jaTuleNilam.length; i++){
        //         const jaDekhateHobe =jaTuleNilam[i];
        //         const li= document.createElement("li");
        //         li.innerText= jaDekhateHobe;//list item hishebe assigned
        //         ul.appendChild(li);//li abar ul er child. tai sekhane append kore dite hobe jehetu main html body te bola nai li kothay ache. 
        //     }
        // }

        // loadData();//the function is called










        //Way-2
        //"async" makes sure the promise becomes true i.e gets returned
        //async use korle kono "then" use kora lage na. because "then" use kora hoy promise return korar jonno. ar, async always makes sure to return promise.
        
        // async function hello (name){
        //     return "Hello" + name;
        // }

        // const greeting = hello("Mofiz");
        // console.log(greeting);
        // //eto tuko porjonto rakhle dekhabe je "promise fulfilled-'Hello Mofiz'"

        // greeting.then(response=> console.log(response));//ebar completely return kore niye ashbe
        

        //this is one of the simplest function where async is used
        //the way-1 is implemented by async below











        //await
        //The await keyword can only be used inside an async function.
        //The keyword await before a function makes the function wait for a promise:

        // async function loadData(){
        //     const response =await fetch('https://jsonplaceholder.typicode.com/users')
        //     const data= await response.json();
        //     displayData(data);
        //     return data;
        // }

        // function displayData(jaPelam){//jaPelam= copied "json" infos from JSON placeholder
        //     const jaTuleNilam=jaPelam.map(jaPelam => jaPelam.username);//show the names of all username from jaPelam. We could've done it so many ways. Here we have done it by map. 
        //     const ul= document.getElementById("myList");

        //     for( let i=0; i<jaTuleNilam.length; i++){
        //         const jaDekhateHobe =jaTuleNilam[i];
        //         const li= document.createElement("li");
        //         li.innerText= jaDekhateHobe;//list item hishebe assigned
        //         ul.appendChild(li);//li abar ul er child. tai sekhane append kore dite hobe jehetu main html body te bola nai li kothay ache. 
        //     }
        // }

        // loadData();//the function is called




        //or,
        async function loadData(){
            const response =await fetch('https://jsonplaceholder.typicode.com/users')
            const data= await response.json();

            return data;
        }

        function displayData(jaPelam){//jaPelam= copied "json" infos from JSON placeholder
            const jaTuleNilam=jaPelam.map(jaPelam => jaPelam.username);//show the names of all username from jaPelam. We could've done it so many ways. Here we have done it by map. 
            const ul= document.getElementById("myList");

            for( let i=0; i<jaTuleNilam.length; i++){
                const jaDekhateHobe =jaTuleNilam[i];
                const li= document.createElement("li");
                li.innerText= jaDekhateHobe;//list item hishebe assigned
                ul.appendChild(li);//li abar ul er child. tai sekhane append kore dite hobe jehetu main html body te bola nai li kothay ache. 
            }
        }

        loadData().then(data =>{
            displayData(data);
        });


    
        
    </script>
</body>
</html>